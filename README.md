# monitor-server
> 自用监控服务端
## 一、背景
> 因为项目众多，而每个项目需要一套完整的prometheus+grafana+alertmanager等众多组件。
+ 基础硬件信息（cpu，内存，硬盘） 
+ 服务监控（服务运行状态）
+ 证书监控
+ k8s集群监控
+ pod状态
## 二、实现效果
> 
> agnet采集，发送server端，统一接受数据处理，从而只需要部署一套完整的监控，从而实现项目快速扩展，从一套项目部署完成后，到实现监控告警，只需要几分钟。

## 三、已完成进度
> 服务端实现

+ 实现数据格式化，对数据进行处理成prometheus可以采集的状态。
+ 实现对prometheus指标自管理，由于是静态指标，所以需要实现对指标进行过期处理。
+ 实现对数据加密处理，对接受到的数据，agent采集数据完成后使用加密，发送给服务端，服务端接受后解密，解密完成后再对数据格式化处理。
+ 实现心跳管理，对agnet进行心跳监控。

## 四、后续
> 其中研究过influxdb，使用influxdb进行存储，但是由于influxdb第一次使用，导致出现无法实现告警通知。后续有时间再写influxdb的，在某些情况下，influxdb对比tsdb要好的多。
